!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}({12:function(t,e,n){t.exports=n("EO+/")},"EO+/":function(t,e,n){"use strict";function a(t){return d(t).parent().parent().parent().parent().parent()}function r(t){d.blockUI.defaults.applyPlatformOpacityRules=!1;var e=d('[role="alert"]'),n=void 0;"chapter"===t.post_type?n=PB_OrganizeToken.updatingChapters:"front-matter"===t.post_type?n=PB_OrganizeToken.updatingFrontMatter:"back-matter"===t.post_type?n=PB_OrganizeToken.updatingBackMatter:"part"===t.post_type&&(n=PB_OrganizeToken.updatingPart),e.children("p").text(n),e.addClass("loading-content").removeClass("visually-hidden"),d.blockUI({message:d(e)})}function i(t){var e=void 0;return"chapter"===t.post_type?e=new wp.api.models.Chapters({id:t.id}):"front-matter"===t.post_type?e=new wp.api.models.FrontMatter({id:t.id}):"back-matter"===t.post_type?e=new wp.api.models.BackMatter({id:t.id}):"part"===t.post_type&&(e=new wp.api.models.Parts({id:t.id})),e}function o(t,e){t=(t=t.attr("id").split("_"))[t.length-1],e=(e=e.attr("id").split("_"))[e.length-1];var n=new wp.api.models.Chapters({id:t});n.fetch({success:function(t,a,r){n.save({part:e},{patch:!0})}})}function s(t,e){return"prev"===e?d(t).prev("[id^=part]"):"next"===e?d(t).next("[id^=part]"):void 0}function p(t){t.children("tbody").children("tr").each(function(t,e){var n=d(e).attr("id").split("_"),a=i(n={id:n[n.length-1],post_type:n[0],menu_order:t});a.fetch({success:function(t,e,r){a.save({menu_order:n.menu_order},{patch:!0})}}),t++})}function l(t){t.children("tbody").children("tr").each(function(e,n){var a="",r='<button class="move-up">Move Up</button>',i='<button class="move-down">Move Down</button>';a=d(n).is("tr:first-of-type")?t.prev("[id^=part]").length?" | "+r+" | "+i:" | "+i:d(n).is("tr:last-of-type")?d(t).next("[id^=part]").length?" | "+r+" | "+i:" | "+r:" | "+r+" | "+i,d(n).children(".has-row-actions").children(".row-title").children(".row-actions").children(".reorder").html(a)})}Object.defineProperty(e,"__esModule",{value:!0});var c=n("EbL4"),u=n.n(c),d=window.jQuery,f={oldPart:null,newPart:null,defaultOptions:{revert:!0,helper:"clone",zIndex:2700,distance:3,opacity:.6,placeholder:"ui-state-highlight",connectWith:".chapters",dropOnEmpty:!0,cursor:"crosshair",items:"tbody > tr",start:function(t,e){f.oldPart=e.item.parents("table").attr("id")},stop:function(t,e){f.newPart=e.item.parents("table").attr("id"),f.update(e.item)}},frontMatterOptions:{revert:!0,helper:"clone",zIndex:2700,distance:3,opacity:.6,placeholder:"ui-state-highlight",dropOnEmpty:!0,cursor:"crosshair",items:"tbody > tr",start:function(t,e){},stop:function(t,e){f.fmupdate(e.item)}},backMatterOptions:{revert:!0,helper:"clone",zIndex:2700,distance:3,opacity:.6,placeholder:"ui-state-highlight",dropOnEmpty:!0,cursor:"crosshair",items:"tbody > tr",start:function(t,e){},stop:function(t,e){f.bmupdate(e.item)}},update:function(t){r({post_type:"chapter"}),o(t,d("#"+f.newPart)),p(d("#"+f.oldPart)),p(d("#"+f.newPart)),l(d("#"+f.oldPart)),l(d("#"+f.newPart))},fmupdate:function(t){r({post_type:"front-matter"}),p(d(t).parent().parent()),l(d(t).parent().parent())},bmupdate:function(t){r({post_type:"back-matter"}),p(d(t).parent().parent()),l(d(t).parent().parent())}};jQuery(document).ready(function(t){t("table.chapters").sortable(f.defaultOptions).disableSelection(),t("table#front-matter").sortable(f.frontMatterOptions).disableSelection(),t("table#back-matter").sortable(f.backMatterOptions).disableSelection(),t("input[name=blog_public]").change(function(){var e=void 0;e=1===parseInt(this.value,10)?1:0,t.ajax({url:ajaxurl,type:"POST",data:{action:"pb_update_global_privacy_options",blog_public:e,_ajax_nonce:PB_OrganizeToken.privacyNonce},beforeSend:function(){0===e?(t("h4.publicize-alert > span").text(PB_OrganizeToken.private),t(".publicize-alert").removeClass("public").addClass("private")):1===e&&(t("h4.publicize-alert > span").text(PB_OrganizeToken.public),t(".publicize-alert").removeClass("private").addClass("public"))},error:function(t,e,n){}})}),t(".web_visibility, .export_visibility").change(function(e){var n=t(e.target).parent().parent().attr("id").split("_");r(n={id:n[n.length-1],post_type:n[0]});var a=t("#export_visibility_"+n.id),o=t("#web_visibility_"+n.id),s=void 0;s=o.is(":checked")?a.is(":checked")?"publish":"web-only":a.is(":checked")?"private":"draft";var p=i(n);p.fetch({success:function(e,n,a){p.save({status:s},{patch:!0,success:function(){!function(){var e={action:"pb_update_word_count_for_export",_ajax_nonce:PB_OrganizeToken.wordCountNonce};t.post(ajaxurl,e,function(e){var n=parseInt(t("#wc-selected-for-export").text(),10);new u.a("wc-selected-for-export",n,e,0,2.5,{separator:""}).start()})}()}})}})}),t(".show_title").change(function(e){var n=t(e.target).parent().parent().attr("id");r(n={id:(n=n.split("_"))[n.length-1],post_type:n[0]});var a="";t(e.target).is(":checked")&&(a="on");var o=i(n);o.fetch({success:function(t,e,n){o.save({meta:{pb_show_title:a}},{patch:!0})}})}),t(document).on("click",".move-up",function(e){var n=a(e.target);r({post_type:n.attr("id").split("_")[0]});var i=t(n).parent().parent();if(t(n).is("tr:first-of-type")&&i.is("[id^=part]")&&i.prev("[id^=part]").length){var c=s(i,"prev");c.append(n),o(n,c),p(i),p(c),l(i),l(c)}else n.prev().before(n),p(i),l(i)}),t(document).on("click",".move-down",function(e){var n=a(e.target);r({post_type:n.attr("id").split("_")[0]});var i=t(n).parent().parent();if(t(n).is("tr:last-of-type")&&i.is("[id^=part]")&&i.next("[id^=part]").length){var c=s(i,"next");c.prepend(n),o(n,c),p(i),p(c),l(i),l(c)}else n.next().after(n),p(i),l(i)});var e=[];t("table thead th").click(function(){var n=t(this).index()+1,a=t(this).parents("table").index()+"_"+n;e[a]?(t(this).parents("table").find("tr td:nth-of-type("+n+")").find("input[type=checkbox]:checked").click(),e[a]=!1):(t(this).parents("table").find("tr td:nth-of-type("+n+")").find("input[type=checkbox]:not(:checked)").click(),e[a]=!0)}),t(document).ajaxStop(function(){var e=t('[role="alert"]');t.unblockUI({onUnblock:function(){e.removeClass("loading-content").addClass("visually-hidden");var t=PB_OrganizeToken.updated;e.children("p").text(t)}})}),t(window).on("beforeunload",function(){if(t.active>0)return"Changes you made may not be saved..."})})},EbL4:function(t,e,n){var a,r;!function(i,o){void 0===(r="function"==typeof(a=o)?a.call(e,n,e,t):a)||(t.exports=r)}(0,function(t,e,n){return function(t,e,n,a,r,i){function o(t){return"number"==typeof t&&!isNaN(t)}var s=this;if(s.version=function(){return"1.9.3"},s.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:function(t,e,n,a){return n*(1-Math.pow(2,-10*t/a))*1024/1023+e},formattingFn:function(t){var e,n,a,r,i,o,p=t<0;if(t=Math.abs(t).toFixed(s.decimals),t+="",e=t.split("."),n=e[0],a=e.length>1?s.options.decimal+e[1]:"",s.options.useGrouping){for(r="",i=0,o=n.length;i<o;++i)0!==i&&i%3==0&&(r=s.options.separator+r),r=n[o-i-1]+r;n=r}return s.options.numerals.length&&(n=n.replace(/[0-9]/g,function(t){return s.options.numerals[+t]}),a=a.replace(/[0-9]/g,function(t){return s.options.numerals[+t]})),(p?"-":"")+s.options.prefix+n+a+s.options.suffix},prefix:"",suffix:"",numerals:[]},i&&"object"==typeof i)for(var p in s.options)i.hasOwnProperty(p)&&null!==i[p]&&(s.options[p]=i[p]);""===s.options.separator?s.options.useGrouping=!1:s.options.separator=""+s.options.separator;for(var l=0,c=["webkit","moz","ms","o"],u=0;u<c.length&&!window.requestAnimationFrame;++u)window.requestAnimationFrame=window[c[u]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[u]+"CancelAnimationFrame"]||window[c[u]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),a=Math.max(0,16-(n-l)),r=window.setTimeout(function(){t(n+a)},a);return l=n+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),s.initialize=function(){return!(!s.initialized&&(s.error="",s.d="string"==typeof t?document.getElementById(t):t,s.d?(s.startVal=Number(e),s.endVal=Number(n),o(s.startVal)&&o(s.endVal)?(s.decimals=Math.max(0,a||0),s.dec=Math.pow(10,s.decimals),s.duration=1e3*Number(r)||2e3,s.countDown=s.startVal>s.endVal,s.frameVal=s.startVal,s.initialized=!0,0):(s.error="[CountUp] startVal ("+e+") or endVal ("+n+") is not a number",1)):(s.error="[CountUp] target is null or undefined",1)))},s.printValue=function(t){var e=s.options.formattingFn(t);"INPUT"===s.d.tagName?this.d.value=e:"text"===s.d.tagName||"tspan"===s.d.tagName?this.d.textContent=e:this.d.innerHTML=e},s.count=function(t){s.startTime||(s.startTime=t),s.timestamp=t;var e=t-s.startTime;s.remaining=s.duration-e,s.options.useEasing?s.countDown?s.frameVal=s.startVal-s.options.easingFn(e,0,s.startVal-s.endVal,s.duration):s.frameVal=s.options.easingFn(e,s.startVal,s.endVal-s.startVal,s.duration):s.countDown?s.frameVal=s.startVal-(s.startVal-s.endVal)*(e/s.duration):s.frameVal=s.startVal+(s.endVal-s.startVal)*(e/s.duration),s.countDown?s.frameVal=s.frameVal<s.endVal?s.endVal:s.frameVal:s.frameVal=s.frameVal>s.endVal?s.endVal:s.frameVal,s.frameVal=Math.round(s.frameVal*s.dec)/s.dec,s.printValue(s.frameVal),e<s.duration?s.rAF=requestAnimationFrame(s.count):s.callback&&s.callback()},s.start=function(t){s.initialize()&&(s.callback=t,s.rAF=requestAnimationFrame(s.count))},s.pauseResume=function(){s.paused?(s.paused=!1,delete s.startTime,s.duration=s.remaining,s.startVal=s.frameVal,requestAnimationFrame(s.count)):(s.paused=!0,cancelAnimationFrame(s.rAF))},s.reset=function(){s.paused=!1,delete s.startTime,s.initialized=!1,s.initialize()&&(cancelAnimationFrame(s.rAF),s.printValue(s.startVal))},s.update=function(t){if(s.initialize()){if(t=Number(t),!o(t))return void(s.error="[CountUp] update() - new endVal is not a number: "+t);s.error="",t!==s.frameVal&&(cancelAnimationFrame(s.rAF),s.paused=!1,delete s.startTime,s.startVal=s.frameVal,s.endVal=t,s.countDown=s.startVal>s.endVal,s.rAF=requestAnimationFrame(s.count))}},s.initialize()&&s.printValue(s.startVal)}})}});